(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2182],{8516:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/courses",function(){return t(9828)}])},8760:(e,r,t)=>{"use strict";function s(){return sessionStorage.getItem("admin_token")}async function a(){let e=s(),r=await fetch("".concat("https://live.maypascollege.com","/api/v1/courses/get"),{headers:{Authorization:"Bearer ".concat(e)}});if(!r.ok)throw Error("Failed to fetch courses list");let t=await r.json();return Array.isArray(t)?t:t.data||[]}async function l(e){let r=s(),t=new FormData;for(let r of(Object.entries(e).forEach(e=>{let[r,s]=e;"course_info_name[]"===r&&Array.isArray(s)?s.forEach(e=>t.append("course_info_name[]",e)):"course_info_value[]"===r&&Array.isArray(s)?s.forEach(e=>t.append("course_info_value[]",e)):"featured_image"===r&&s?s instanceof File?t.append("featured_image",s):Array.isArray(s)&&s.forEach(e=>t.append("featured_image",e)):t.append(r,s)}),t.entries()))console.log("FormData:",r[0],":",r[1]);console.log(e),console.log("Creating course with FormData:");let a=await fetch("".concat("https://live.maypascollege.com","/api/v1/contents/course/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),Accept:"application/json"},body:t});if(console.log(a),!a.ok)throw Error("Failed to create course");return a.json()}async function n(e,r){let t=s(),a=new FormData;for(let e of(Object.entries(r).forEach(e=>{let[r,t]=e;"course_info_name[]"===r&&Array.isArray(t)?t.forEach(e=>a.append("course_info_name[]",e)):"course_info_value[]"===r&&Array.isArray(t)?t.forEach(e=>a.append("course_info_value[]",e)):"featured_image"===r&&t?t instanceof File?a.append("featured_image",t):Array.isArray(t)&&t.forEach(e=>a.append("featured_image",e)):a.append(r,t)}),a.entries()))console.log("FormData:",e[0],":",e[1]);let l=await fetch("".concat("https://live.maypascollege.com","/api/v1/contents/course/update/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"},body:a});if(!l.ok)throw Error("Failed to update course");return l.json()}async function i(e){let r=s(),t=await fetch("".concat("https://live.maypascollege.com","/api/v1/contents/course/delete/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to delete course");return t.json()}t.d(r,{C_:()=>l,D:()=>a,J4:()=>n,zs:()=>i})},9828:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var s=t(7876),a=t(4695),l=t(4232),n=t(439),i=t(5753),o=t(8230),c=t.n(o);function d(e){var r;let{item:t,categories:a}=e,l=(null==a||null==(r=a.find(e=>String(e.id)===String(t.course_category_id)))?void 0:r.name)||"Category";return(0,s.jsxs)("div",{className:"courses__item shine__animate-item",children:[(0,s.jsxs)("div",{className:"courses__item-thumb",children:[(0,s.jsx)(c(),{href:"/course/".concat(t.id),className:"courses__item-tag",style:{backgroundColor:"#4f8cff"},children:l}),(0,s.jsx)(c(),{href:"/course/".concat(t.id),className:"shine__animate-link",children:(0,s.jsx)("img",{src:t.featured_image_path?"https://live.maypascollege.com/storage/"+t.featured_image_path:"/assets/img/courses/default.png",alt:"img"})})]}),(0,s.jsxs)("div",{className:"courses__item-content",children:[(0,s.jsx)("h5",{className:"title",children:(0,s.jsx)(c(),{href:"/course/".concat(t.id),children:t.title})}),(0,s.jsx)("div",{className:"courses__item-bottom",children:(0,s.jsxs)("h5",{className:"price",children:["$",t.price]})})]})]})}var u=t(8760),h=t(5360);let m=()=>{var e,r,t,o,c,m;let[p,f]=(0,l.useState)([]),[g,v]=(0,l.useState)([]),[j,_]=(0,l.useState)(!0),[x,y]=(0,l.useState)(""),{courseList:N,courseSort:w}=(0,a.d4)(e=>e.courseFilter),{category:A,instructor:b,price:S,language:E,difficulty:C}=N||{},{sort:F,perPage:O}=w,k=(0,a.wA)();(0,l.useEffect)(()=>{_(!0),y(""),Promise.all([(0,u.D)().then(e=>Array.isArray(e)?e:e.data||[]),(0,h.bW)().then(e=>Array.isArray(e)?e:e.data||[])]).then(e=>{let[r,t]=e;f(r),v(t)}).catch(()=>{y("Oops, something went wrong. Please try again later."),f([]),v([])}).finally(()=>_(!1))},[]);let L=null==p||null==(m=p.filter(e=>(null==A?void 0:A.length)!==0?null==A?void 0:A.includes(String(e.course_category_id)):e))||null==(c=m.filter(e=>{var r;return(null==b?void 0:b.length)!==0?null==b?void 0:b.includes(null==e||null==(r=e.instructor)?void 0:r.split(" ").join("").toLocaleLowerCase()):e}))||null==(o=c.filter(e=>(null==S?void 0:S.length)!==0?null==S?void 0:S.includes(String(null==e?void 0:e.price)):e))||null==(t=o.filter(e=>{var r;return(null==E?void 0:E.length)!==0?null==E?void 0:E.includes(null==e||null==(r=e.language)?void 0:r.split(" ").join("").toLocaleLowerCase()):e}))||null==(r=t.filter(e=>{var r;return(null==C?void 0:C.length)!==0?null==C?void 0:C.includes(null==e||null==(r=e.difficulty)?void 0:r.split(" ").join("").toLocaleLowerCase()):e}))||null==(e=r.sort((e,r)=>"des"===F?e.id>r.id&&-1:e.id<r.id&&-1).slice(O.start,0!==O.end?O.end:12))?void 0:e.map(e=>(0,s.jsx)("div",{className:"col",children:(0,s.jsx)(d,{item:e,categories:g})},e.id));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"shop-top-wrap courses-top-wrap",children:(0,s.jsxs)("div",{className:"row align-items-center",children:[(0,s.jsx)("div",{className:"col-md-6",children:(0,s.jsx)("div",{className:"shop-top-left",children:j?(0,s.jsx)("p",{children:"Loading courses..."}):x?(0,s.jsx)("p",{style:{color:"#ff4f4f"},children:x}):(0,s.jsxs)("p",{children:["We found ",null==L?void 0:L.length," courses for you"]})})}),(0,s.jsx)("div",{className:"col-md-6",children:(0,s.jsxs)("div",{className:"d-flex justify-content-center justify-content-md-end align-items-center",children:[(0,s.jsx)("div",{children:(null==A?void 0:A.length)!==0||(null==b?void 0:b.length)!==0||(null==S?void 0:S.length)!==0||(null==E?void 0:E.length)!==0||(null==C?void 0:C.length)!==0||""!==F||0!==O.start||0!==O.end?(0,s.jsx)("button",{onClick:()=>{k((0,n.F)()),k((0,n.iH)()),k((0,n.VN)()),k((0,n.Yv)()),k((0,n.tB)()),k((0,i.hK)()),k((0,i.CF)()),k((0,i.hv)()),k((0,i.k3)()),k((0,i.LQ)()),k((0,n.s1)("")),k((0,n.us)({start:0,end:0}))},className:"btn btn-reset text-nowrap me-2",children:"Reset"}):void 0}),(0,s.jsx)("div",{className:"shop-top-right m-0 ms-md-auto",children:(0,s.jsxs)("select",{value:F,name:"orderby",className:"orderby",onChange:e=>{k((0,n.s1)(e.target.value))},children:[(0,s.jsx)("option",{value:"",children:"Sort by (default)"}),(0,s.jsx)("option",{value:"asc",children:"Newest"}),(0,s.jsx)("option",{value:"des",children:"Oldest"})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("select",{onChange:e=>{let r=JSON.parse(e.target.value);k((0,n.us)(r))},className:"chosen-single form-select ms-3 ",value:JSON.stringify(O),children:[(0,s.jsx)("option",{value:JSON.stringify({start:0,end:0}),children:"All"}),(0,s.jsx)("option",{value:JSON.stringify({start:0,end:10}),children:"10 per page"}),(0,s.jsx)("option",{value:JSON.stringify({start:0,end:20}),children:"20 per page"}),(0,s.jsx)("option",{value:JSON.stringify({start:0,end:30}),children:"30 per page"})]})})]})})]})}),(0,s.jsx)("div",{className:"row courses__grid-wrap row-cols-1 row-cols-xl-3 row-cols-lg-2 row-cols-md-2 row-cols-sm-1",children:j||x?null:L})]})};function p(){let[e,r]=(0,l.useState)([]),t=(0,a.wA)(),i=(0,a.d4)(e=>e.courseFilter.courseList.category);return(0,l.useEffect)(()=>{(0,h.bW)().then(e=>{r(Array.isArray(e)?e:e.data||[])})},[]),(0,s.jsxs)("div",{className:"filter-categories",children:[(0,s.jsx)("h5",{children:"Programmes"}),(0,s.jsx)("ul",{children:e.map(e=>(0,s.jsx)("li",{children:(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:null==i?void 0:i.includes(String(e.id)),onChange:()=>{var r;return r=String(e.id),void t((0,n.Ah)(r))}}),e.name]})},e.id))})]})}var f=t(9835);function g(){let[e,r]=(0,l.useState)(1);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(f.A,{headerStyle:3,footerStyle:1,breadcrumbTitle:"Our Courses",children:(0,s.jsx)("section",{className:"all-courses-area section-py-120",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-xl-3 col-lg-4 order-2 order-lg-0",children:(0,s.jsx)(p,{})}),(0,s.jsx)("div",{className:"col-xl-9 col-lg-8",children:(0,s.jsx)("div",{className:"tab-content",id:"myTabContent",children:(0,s.jsx)("div",{className:1===e?"tab-pane fade show active":"tab-pane fade",children:(0,s.jsx)(m,{})})})})]})})})})})}}},e=>{e.O(0,[9008,633,9835,636,6593,8792],()=>e(e.s=8516)),_N_E=e.O()}]);